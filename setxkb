#!/usr/bin/env sh
# Set X keyboard properties.

killall sxhkd && wassxhkd="1"

setxkbmap -option "caps:escape"
xmodmap -e "keycode 108 = Super_R"
xmodmap -e "keycode 9 = Caps_Lock"
xset -r 9
xset r rate 250 40

if [ -n "$1" ]
then
    km="$1"
else
    km="$( xkb-switch )"
fi

case "$km"
in
    gb) xmodmap -e "keycode 135 = Menu";;
    tr) xmodmap -e "keycode 135 = ISO_Level3_Shift";;
esac

[ "$wassxhkd" = "1" ] && restart-sxhkd --no-kill
