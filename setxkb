#!/usr/bin/env sh
# Set X keyboard properties.

tglapp -T off sxhkd

# caps_lock -> escape
setxkbmap -option "caps:escape"
# alt_gr -> super_r
# escape -> caps_lock
# return -> backspace
# backspace -> tab
# tab -> return
xmodmap -e "keycode 108 = Super_R" -e "keycode 9 = Caps_Lock"
# xmodmap -e "keycode 108 = Super_R" -e "keycode 9 = Caps_Lock" -e "keycode 36 = BackSpace" -e "keycode 22 = Tab" -e "keycode 23 = Return" # TODO: Brave does not respect the changes to Tab/BackSpace/Return. Report/fix and uncomment.
xset -r 9
xset -r 108
xset -r 135
xset r rate 250 40

if [ -n "$1" ]
then
    km="$1"
else
    km="$( xkb-switch )"
fi

case "$km"
in
    gb) xmodmap -e "keycode 135 = Menu";;
    tr) xmodmap -e "keycode 135 = ISO_Level3_Shift";;
esac

restart-sxhkd
