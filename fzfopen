#!/usr/bin/env sh

setfile() {
    file="$( fzf )"
}

openfile() {
    [ "$file" ] || return

    xdg-open "$file"

#    # This is a workaround for xdg-open not working as intended.
#    extension="$( echo "$file" | sed 's/.*\.//' )"
#    case "$extension" in
##       pdf)
##            zathura "$file" &
##            ;;
#        *)
#            xdg-open "$file"
#            ;;
#    esac
}

if ! [ "$@" ]
then
    setfile
    openfile
else
    for i in "$@"
    do
        loc="$( getloc "$i" )"

        [ "$( getloc "$i" )" ] && {
            cd "$loc"
            setfile
            openfile
        }
    done
fi
